{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46483266-76bdcaf2ff3adfe100a8b1f15';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`;\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nexport function renderGallery(images) {\n    const galleryContainer = document.getElementById('gallery');\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"info\">\n                <p>Likes: ${image.likes}</p>\n                <p>Views: ${image.views}</p>\n                <p>Comments: ${image.comments}</p>\n                <p>Downloads: ${image.downloads}</p>\n            </div>\n        </a>\n    `).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    new SimpleLightbox('.gallery a').refresh();\n}\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n}\n\nexport function showLoader() {\n    document.getElementById('loader').style.display = 'block';\n}\n\nexport function hideLoader() {\n    document.getElementById('loader').style.display = 'none';\n}\n\nexport function toggleLoadMoreButton(show) {\n    const loadMoreBtn = document.getElementById('load-more');\n    if (show) {\n        loadMoreBtn.style.display = 'block';\n    } else {\n        loadMoreBtn.style.display = 'none';\n    }\n}\n\nexport function scrollToNextGroup() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, showError, showLoader, hideLoader, toggleLoadMoreButton, scrollToNextGroup } from './js/render-functions.js';\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\ndocument.getElementById('search-form').addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    query = document.getElementById('search-input').value.trim();\n\n    if (!query) {\n        showError('Please enter a search term');\n        return;\n    }\n\n    resetGallery();\n    page = 1;\n    await searchImages();\n});\n\ndocument.getElementById('load-more').addEventListener('click', async () => {\n    page += 1;\n    await searchImages();\n});\n\nasync function searchImages() {\n    showLoader();\n    try {\n        const { hits, totalHits: total } = await fetchImages(query, page);\n        hideLoader();\n        totalHits = total;\n\n        if (hits.length === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n            return;\n        }\n\n        renderGallery(hits);\n        toggleLoadMoreButton(totalHits > document.querySelectorAll('.gallery-item').length);\n\n        if (page > 1) {\n            scrollToNextGroup();\n        }\n\n        if (totalHits <= document.querySelectorAll('.gallery-item').length) {\n            toggleLoadMoreButton(false);\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (error) {\n        hideLoader();\n        showError('Failed to fetch images. Please try again later.');\n    }\n}\n\nfunction resetGallery() {\n    document.getElementById('gallery').innerHTML = '';\n    toggleLoadMoreButton(false);\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","url","axios","error","renderGallery","images","galleryContainer","markup","image","SimpleLightbox","showError","message","iziToast","showLoader","hideLoader","toggleLoadMoreButton","show","loadMoreBtn","scrollToNextGroup","cardHeight","totalHits","event","resetGallery","searchImages","hits","total"],"mappings":"wyBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBI,CAAK,CAAC,iEAAiEC,CAAI,aAAaH,CAAQ,GAC/J,GAAI,CAEA,OADiB,MAAMK,EAAM,IAAID,CAAG,GACpB,IACnB,OAAQE,EAAO,CACZ,MAAMA,CACT,CACL,CCXO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAmB,SAAS,eAAe,SAAS,EACpDC,EAASF,EAAO,IAAIG,GAAS;AAAA,mBACpBA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,4BAElCA,EAAM,KAAK;AAAA,4BACXA,EAAM,KAAK;AAAA,+BACRA,EAAM,QAAQ;AAAA,gCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG1C,EAAE,KAAK,EAAE,EAEVF,EAAiB,mBAAmB,YAAaC,CAAM,EACvD,IAAIE,EAAe,YAAY,EAAE,SACrC,CAEO,SAASC,EAAUC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,CACjB,CAAK,CACL,CAEO,SAASE,GAAa,CACzB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OACtD,CAEO,SAASC,GAAa,CACzB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,MACtD,CAEO,SAASC,EAAqBC,EAAM,CACvC,MAAMC,EAAc,SAAS,eAAe,WAAW,EACnDD,EACAC,EAAY,MAAM,QAAU,QAE5BA,EAAY,MAAM,QAAU,MAEpC,CAEO,SAASC,GAAoB,CAChC,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL,CChDA,IAAIpB,EAAQ,GACRC,EAAO,EACPoB,EAAY,EAEhB,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAU,MAAOC,GAAU,CAK/E,GAJAA,EAAM,eAAc,EAEpBtB,EAAQ,SAAS,eAAe,cAAc,EAAE,MAAM,OAElD,CAACA,EAAO,CACRW,EAAU,4BAA4B,EACtC,MACH,CAEDY,IACAtB,EAAO,EACP,MAAMuB,EAAY,CACtB,CAAC,EAED,SAAS,eAAe,WAAW,EAAE,iBAAiB,QAAS,SAAY,CACvEvB,GAAQ,EACR,MAAMuB,EAAY,CACtB,CAAC,EAED,eAAeA,GAAe,CAC1BV,IACA,GAAI,CACA,KAAM,CAAE,KAAAW,EAAM,UAAWC,CAAK,EAAK,MAAM3B,EAAYC,EAAOC,CAAI,EAIhE,GAHAc,IACAM,EAAYK,EAERD,EAAK,SAAW,EAAG,CACnBd,EAAU,0EAA0E,EACpF,MACH,CAEDN,EAAcoB,CAAI,EAClBT,EAAqBK,EAAY,SAAS,iBAAiB,eAAe,EAAE,MAAM,EAE9EpB,EAAO,GACPkB,IAGAE,GAAa,SAAS,iBAAiB,eAAe,EAAE,SACxDL,EAAqB,EAAK,EAC1BL,EAAU,4DAA4D,EAE7E,MAAe,CACZI,IACAJ,EAAU,iDAAiD,CAC9D,CACL,CAEA,SAASY,GAAe,CACpB,SAAS,eAAe,SAAS,EAAE,UAAY,GAC/CP,EAAqB,EAAK,CAC9B"}